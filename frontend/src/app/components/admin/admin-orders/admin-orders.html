<div class="container-fluid mt-4">

  <!-- Header -->
    <div class="card-header d-flex justify-content-between align-items-center bg-dark text-white rounded-top">


    <h5 class="mb-0 label-title">Orders Management</h5>

    <button class="btn btn-success" (click)="openAdd()">
      + Add Order
    </button>

  </div>

  <!-- Table -->
  <div class="table-responsive">

    <table class="table table-striped table-hover">

      <thead class="table-dark">
      <tr>
        <th>ID</th>
        <th>Image</th>
        <th>Name</th>
        <th>Price</th>
        <th>Category</th>
        <th>Actions</th>
      </tr>
      </thead>

      <tbody>

        @for (o of orders; track o.orderId) {
          <tr>
            <td>{{o.orderId}}</td>

            <td>
              <img width="50" [src]="'assets/img/' + o.image + '.jpg'">
            </td>

            <td>{{o.orderName}}</td>

            <td>{{o.orderPrice}}</td>

            <td>{{o.category?.categoryName}}</td>
            <td>
              <div class="d-flex gap-2">
                <button class="btn btn-sm btn-primary" (click)="edit(o)">Edit</button>
                <button class="btn btn-sm btn-danger" (click)="delete(o.orderId)">Delete</button>
              </div>
            </td>
          </tr>
        }

      </tbody>

    </table>

    <!-- ================= Modal ================= -->
    <div class="modal fade" id="orderModal" tabindex="-1">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">

          <!-- Header -->
          <div class="modal-header bg-dark text-white">
            <h5 class="modal-title">{{ modalTitle() }}</h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>

          </div>

          <!-- Body -->
          <div class="modal-body">

            <form [formGroup]="orderForm">

              <div class="row g-3">

                <div class="col-md-6">
                  <label>Name</label>
                  <input class="form-control" formControlName="orderName">
                </div>

                <div class="col-md-6">
                  <label>Price</label>
                  <input type="number" class="form-control" formControlName="orderPrice">
                </div>

                <div class="col-md-6">
                  <label>Image</label>
                  <input class="form-control" formControlName="image">
                </div>

                <div class="col-md-6">
                  <label>Category</label>
                  <select class="form-select" formControlName="category">
                    @for (c of categories; track c.categoryId) {
                      <option [ngValue]="c">{{c.categoryName}}</option>
                    }
                  </select>
                </div>

                <div class="col-12">
                  <label>Description</label>
                  <textarea class="form-control" formControlName="orderDescription"></textarea>
                </div>

              </div>

            </form>

          </div>

          <!-- Footer -->
          <div class="modal-footer justify-content-end gap-2">

            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-success" (click)="save()">Save</button>

          </div>

        </div>
      </div>
    </div>

  </div>

</div>

